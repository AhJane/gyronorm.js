<html>
<head>
<meta name="viewport" content="width=device-width, user-scalable=no">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="../bower_components/es6-promise/promise.min.js"></script>
<script src="../bower_components/fulltilt/dist/fulltilt.min.js"></script>
<script src="../gyronorm.js"></script>
<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
</head>
<body onload="init_gn()">
	
	<input id="test"/>

	<script type="text/javascript">

		var gn;

		function init_gn(){
			var args = {
				logger:logger,
				frequency:10000
			};

			gn = new GyroNorm();

			gn.init(args).then(function(){

				if(gn.isAvailable(gn.DEVICE_ORIENTATION)){



				}				

				gn.start(gnCallBack);	

			});

		}	

		function logger(data){
			$('#error-message').append(data.message + "\n");
		}

		function stop_gn(){
			gn.stop();
		}

		function start_gn(){
			gn.start(gnCallBack);
		}

		function gnCallBack(data){
			
			$('#test').val(data.do.alpha);
		
			// $('#do_alpha').val(data.do.alpha);
			// $('#do_beta').val(data.do.beta);
			// $('#do_gamma').val(data.do.gamma);

			// $('#dm_x').val(data.dm.x);	
			// $('#dm_y').val(data.dm.y);	
			// $('#dm_z').val(data.dm.z);	

			// $('#dm_gx').val(data.dm.gx);	
			// $('#dm_gy').val(data.dm.gy);	
			// $('#dm_gz').val(data.dm.gz);	

			// $('#dm_alpha').val(data.dm.alpha);
			// $('#dm_beta').val(data.dm.beta);
			// $('#dm_gamma').val(data.dm.gamma);
		}

		function abs_gn(){
			gn.giveAbsoluteDirection(true);
		}

		function rel_gn(){
			gn.giveAbsoluteDirection(false);
		}

		function norm_gn(){
			gn.normalizeGravity(true);
		}

		function org_gn(){
			gn.normalizeGravity(false);
		}

		function set_head_gn(){
			gn.setHeadDirection();
		}

		function showDO(){
			$('#do').show();
			$('#dm').hide();
			$('#btn-dm').removeClass('selected');
			$('#btn-do').addClass('selected');
		}

		function showDM(){
			$('#dm').show();
			$('#do').hide();
			$('#btn-do').removeClass('selected');
			$('#btn-dm').addClass('selected');
		}


	</script>
</body>
</html>